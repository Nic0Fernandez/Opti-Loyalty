{% extends "base.html" %}

{% block title %}Mon Compte{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Mon Compte</h2>
    <section>
        <h3>Informations personnelles</h3>
        <ul class="list-group mb-4">
            <li class="list-group-item"><strong>Nom :</strong> {{ user.last_name }}</li>
            <li class="list-group-item"><strong>Prénom :</strong> {{ user.first_name }}</li>
            <li class="list-group-item"><strong>Adresse e-mail :</strong> {{ user.email }}</li>
        </ul>
    </section>

    <section>
        <h3>Modifier le mot de passe</h3>
        <form method="POST" action="{% url 'change_password' %}" class="mb-4">
            {% csrf_token %}
            <div class="form-group">
                <label for="old_password">Ancien mot de passe :</label>
                <input type="password" id="old_password" name="old_password" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="new_password1">Nouveau mot de passe :</label>
                <input type="password" id="new_password1" name="new_password1" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="new_password2">Confirmer le nouveau mot de passe :</label>
                <input type="password" id="new_password2" name="new_password2" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">Mettre à jour le mot de passe</button>
        </form>
    </section>

    <section>
        <h3>Supprimer le compte</h3>
        <form method="POST" action="{% url 'delete_account' %}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer votre compte ? Cette action est irréversible.')" class="mb-4">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Supprimer mon compte</button>
        </form>
    </section>
</div>
{% endblock %}
